<div class="cities-container">
  <div class="cities-grid">
    <div class="city-card" *ngFor="let city of cities; trackBy: trackCity" (click)="selectCity(city)">
      <div class="city-info">
        <h3 class="city-name">{{ city.name }}</h3>
        <p class="city-details">
          <span *ngIf="city.state" class="state">{{ city.state }}, </span>
          <span class="country">{{ city.country }}</span>
        </p>
        <p class="coordinates">
          <small>{{ city.lat.toFixed(2) }}, {{ city.lon.toFixed(2) }}</small>
        </p>
      </div>
      <div class="city-arrow">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9,18 15,12 9,6"></polyline>
        </svg>
      </div>
      <ng-container *ngIf="isFavorite(city) as fav; else addBtn">
        <button class="remove-fav-btn" (click)="removeFromFavorites(fav); $event.stopPropagation()">
          Eliminar de favoritos
        </button>
      </ng-container>
      <ng-template #addBtn>
        <button class="add-fav-btn" (click)="addToFavorites(city); $event.stopPropagation()">
          AÃ±adir a favoritos
        </button>
      </ng-template>
    </div>
  </div>
</div>